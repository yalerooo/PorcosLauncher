{const e="**VMInitInjection**";1!==window[e]&&(window[e]=function(e,t,n){const o={__proto__:null},r=this,{window:l}=r,s="content",i="responseHeaders",a="responseText",c="responseType",u=e=>"function"==typeof e,d=e=>null!=e&&"object"==typeof e,_="prototype",p=e=>"string"==typeof e,f=(e,t,n)=>{try{e&&ie(e,t)&&(n=e[t])}catch(e){}return n},g=(e,t,n,o=!0,r)=>F(e,t,{__proto__:null,[r||"value"]:n,[!r&&"writable"]:o,configurable:o,enumerable:o}),m=e=>J(C(),e),h=(e,t,n)=>(B(e)&&(e=m(e)),t&&G(E,n,n=>{ie(t,n)&&(e[n]=t[n])}),e),y=(e,t,n,o)=>{var r;const l=e[t]||(e[t]=C());return null!=(r=l[n])?r:l[n]=null!=o?o:C()},v=async e=>e,w=(e="VM")=>e+de(),b=(e,...t)=>{let n="[AceScript]";t[0]&&G(E,t[0],e=>{n+=`[${e}]`}),t[0]=n,R(ue[e],ue,t)},M=(e,t,n)=>F(e,t,B(n)?m(n):n),x=(e,t)=>g(e,e.length,t);let G,C,E,R,S,$,A,I,V,k,P,O,T,L,j,U,W,N,q,D,H,J,F,K,B,X,z,Q,Y,Z,ee,te,ne,oe,re,le,se,ie,ae,ce,ue,de,_e,pe,fe,ge,me,he,ye,ve;const we=t?null:r.cloneInto,be=(()=>{let t,o,s,i,a,c,d,p=-1,g=r,h=l;return n&&(c=l[n],delete l[n]),c&&!u(c[0])&&(g=c[0],h=g,d=e&&c[1],c=!1),c||(c={__proto__:null}),c=[$=c[p+=1]||g.CustomEvent,A=c[p+=1]||g.DOMParser,I=c[p+=1]||g.Error,V=c[p+=1]||g.EventTarget,k=c[p+=1]||g.KeyboardEvent,P=c[p+=1]||g.MouseEvent,O=c[p+=1]||g.Object,L=c[p+=1]||g.Symbol,T=c[p+=1]||g.Proxy,U=c[p+=1]||g.dispatchEvent,q=c[p+=1]||g.removeEventListener,D=c[p+=1]||g.addEventListener,F=(s=O)&&c[p+=1]||s.defineProperty,K=c[p+=1]||s.getOwnPropertyDescriptor,a=c[p+=1]||s.getOwnPropertyNames,B=c[p+=1]||s.getPrototypeOf,J=c[p+=1]||s.assign,X=c[p+=1]||s.keys,z=c[p+=1]||s.values,Q=c[p+=1]||(t=g.Array[_]).concat,Y=c[p+=1]||t.filter,E=c[p+=1]||t.forEach,Z=c[p+=1]||t.indexOf,ee=c[p+=1]||g.Element[_].remove,te=c[p+=1]||g.String[_].slice,R=c[p+=1]||(o=g.Reflect).apply,G=c[p+=1]||(i=s.call).bind(i),S=c[p+=1]||i.bind(s.bind),oe=c[p+=1]||g.URL[_].toString,C=c[p+=1]||S(s.create,s,null),le=c[p+=1]||g.URL.createObjectURL,se=c[p+=1]||g.FormData[_].entries,ie=c[p+=1]||S(i,s[_].hasOwnProperty),re=c[p+=1]||g.Array.isArray,ae=c[p+=1]||g.JSON.parse,ce=c[p+=1]||g.JSON.stringify,ue=c[p+=1]||m((d||g).console),de=c[p+=1]||g.Math.random,_e=c[p+=1]||A[_].parseFromString,pe=c[p+=1]||o.ownKeys,fe=c[p+=1]||g.Event[_].stopImmediatePropagation,ge=c[p+=1]||g.Promise[_].then,me=c[p+=1]||g.URLSearchParams[_].toString,he=c[p+=1]||K(g.Document[_],"currentScript").get,ye=c[p+=1]||K($[_],"detail").get,ve=c[p+=1]||K(P[_],"relatedTarget").get,W=c[p+=1]||K(h,"length").get||(()=>f(l,"length",1e9)),N=c[p+=1]||K(h,"parent").get||(()=>f(l,"parent")),ne=c[p+=1]||[a(h),g!==h&&a(g)]],H=L.toStringTag,c})();try{j=Promise}catch(e){}(()=>{"use strict";var n={__proto__:null};for(let e=0,t="dor";e<t.length;e++)F(n,t[e],{__proto__:null,value:0,writable:1});n.d=(e,t)=>{for(var n in t)n in e||F(e,n,{__proto__:null,enumerable:!0,get:t[n]})},n.o=(e,t)=>ie(e,t),n.r=e=>{F(e,H,{__proto__:null,value:"Module"}),F(e,"__esModule",{__proto__:null,value:!0})};var B={__proto__:null};n.r(B),n.d(B,{__proto__:null,default:()=>jt});const de=C(),ge=e=>J(de,e),Me={__proto__:null,Error(e){throw e}},xe={__proto__:null,callbacks:Me,onHandle({cmd:e,data:t,node:n}){const o=de[e];o&&G(o,n,t)},send(e,t,n){let o,r;try{r=new j(e=>{o=e})}catch(e){}return Ce(e,t,n,o),r},call:Ce};let Ge;function Ce(e,t,n,o,r){const l=w();if(Me[l]=o||Ee,r?g(t,r,l):t={__CBID:l,data:t},xe.post(e,t,n),!o)return Ge}function Ee(e){Ge=e}const Re=xe,Se={commands:C(),values:C()};function $e(e){for(const t in e)if(ie(e,t))return!1;return!0}const Ae={__proto__:null,string:"s",number:"n",boolean:"b"};function Ie(e,t=JSON.stringify){if(void 0!==e){const n=Ae[typeof e];return`${n||"o"}${n?e:t(e)}`}}const Ve=(e,t)=>{const n=we?we(t,document):t,o=new $(e,{__proto__:null,detail:n});G(U,l,o)},ke=(e,t,n)=>{let o;G(D,l,e,e=>{if(G(fe,e),o)o.node=G(ve,e),n.onHandle(o),o=null;else{const t=G(ye,e),r=we?we(t,l):t;o=r.node&&r,o||n.onHandle(r)}},!0),n.post=(e,o,r,s)=>{const i=n.ids?s:r,a=i&&new P(t,{__proto__:null,relatedTarget:i});Ve(t,{cmd:e,data:o,node:!!a}),a&&G(U,l,a)}},Pe=[];ge({WatchOnlineMenuClicked(e){var t;t=e.url,Pe.forEach(e=>{"function"==typeof e&&e(t)})}});let Oe=0;const Te=C();function Le(e){Oe+=1;const t=Oe,n={onclose:null,closed:!1,close(){Re.post("TabClose",t)}};return Te[t]=n,Re.post("TabOpen",{key:t,data:e}),n}ge({TabClosed(e){const t=Te[e];t&&(t.closed=!0,delete Te[e],null==t.onclose||t.onclose())}});const je=C(),Ue="text/html",We="response",Ne="responseXML",qe="document",De=["abort","error","load","loadend","loadstart","progress","readystatechange","timeout"],He=["context",c],Je=["headers","method","overrideMimeType","password","timeout","user"],Fe=["application/xhtml+xml","application/xml","image/svg+xml","text/xml",Ue],Ke={__proto__:null,arraybuffer:1,blob:1,json:0,[qe]:0,text:0,"":0};function Be(e,t,n){const{[c]:o}=e;let r,l;if("raw"in e){if(r=e.raw,o===qe&&(l=Ue)||!o&&n===Ne&&G(Z,Fe,l=Qe(t)||Ue)>=0||"json"===o)try{r=l?G(_e,new A,r,l):ae(r)}catch(e){r=null}if(o===qe){const t=n===We?Ne:We;g(this,t,r),e[t]=r}o&&delete e.raw,e[n]=r}else r=e[n];return void 0===r&&(r=null),g(this,n,r),r}function Xe(t,n,o){let r,{data:l,url:s,[c]:i=""}=t;if(s||"url"in t){if(!p(s)){if(s===location)s=s.href;else try{s=G(oe,s)}catch(e){try{s=`${s}`}catch(e){r=e}}t.url=s}}else r=new I('Required parameter "url" is missing.');if(r)return void ze(t,r);i in Ke||(ue.warn(`Unknown ${c} "${i}"`),i="");const a=n.id,_=w("VMxhr"),f=C(),g=h({cb:f,id:_,scriptId:a},t,He),{withCredentials:m=!0,anonymous:y=!m}=t;return je[_]=g,l=null==l&&[]||(t.binary||!d(l))&&[`${l}`]||Ye(l)||e>=56&&[l]||[l,"bin"],Re.call("HttpRequest",h({anonymous:y,data:l,id:_,scriptId:a,url:s,fileName:o,[c]:i,events:G(Y,De,e=>u(f[e]=t[`on${e}`])),xhrType:Ke[i]?i:""},t,Je)),{abort(){Re.post("AbortRequest",_)}}}function ze({onerror:e},t){if(!u(e))throw t;e(t)}function Qe(e){const t=e.contentType||"",n=t.length;let o,r=0;for(;r<n&&","!==(o=t[r])&&";"!==o&&o>" ";)r+=1;return G(te,t,0,r)}function Ye(e){try{return[[...G(se,e)],"fd"]}catch(e){}try{return[G(me,e),"usp"]}catch(e){}}ge({HttpRequested(e){const t=je[e.id];if(!t)return;const{type:n}=e,o=t.cb[n];if("loadend"===n&&delete je[t.id],!o)return;if(ie(e,"error"))return void o(new I(e.error));const{data:r}=e,{[We]:l,[i]:s,[a]:c}=r;null!=l&&(t.raw=l),null!=s&&(t[i]=s),null!=c&&(t[a]="same"===f(c,0)?l:c),g(r,"context",t.context),g(r,i,t[i]),g(r,a,t[a]),g(r,Ne,S(Be,r,t,e,Ne),!0,"get"),g(r,We,S(Be,r,t,e,We),!0,"get"),o(r)}});let Ze=0;const et=C();function tt(e){return Ze+=1,et[Ze]=e,Re.post("Notification",{id:Ze,text:e.text,title:e.title,image:e.image}),Ze}ge({NotificationClicked(e){var t;null==(t=et[e])||null==t.onclick||t.onclick()},NotificationClosed(e){const t=et[e];t&&(delete et[e],null==t.ondone||t.ondone())}});const nt=C(),ot={__proto__:null,o:ae,n:e=>+e,b:e=>"true"===e};function rt(e){return Se.values[e]}function lt(e,t,n,o,r,l){let s;if(o!==r){var i;s=Re[l.async?"send":"post"]("UpdateValue",{id:e,key:t,raw:o});const a=null==(i=nt[e])?void 0:i[t];a&&ct(a,t,n,o,r)}else l.async&&(s=v());return s}function st(e){const t=e[0],n=ot[t];let o=G(te,e,1);try{n&&(o=n(o))}catch(e){}return o}function it(e,t){G(E,X(t),n=>{const o=t[n];o?e[n]=o:delete e[n]})}function at(e,t,n){G(E,X(n),o=>{const r=n[o]||void 0,l=t[o];if(l!==r){r?t[o]=r:delete t[o];const n=e[o];n&&ct(n,o,void 0,r,l,!0)}})}function ct(e,t,n,o,r,l=!1){const s=r?st(r):void 0,i=void 0===n&&o?st(o):n;G(E,z(e),e=>{try{e(t,s,i,l)}catch(e){b("error",["GM_addValueChangeListener","callback"],e)}})}ge({UpdatedValues(e){G(E,X(e),t=>{const n=Se.values[t];if(n){const o=e[t],r=nt[t];r?at(r,n,o):it(n,o)}})}});const ut=L.isConcatSpreadable,dt=(...e)=>{const t=[];return g(t,ut,!0),G(E,e,e=>g(e,ut,!0)),R(Q,t,e)},_t=(e,t)=>{let n;if(null===e)n="null";else if("object"==typeof e){if(t){if(G(Z,t,e)>=0)throw new I("Converting circular structure to JSON");g(t,t.length,e)}else t=[e];if(re(e)){n="[";for(let r=0,l=e.length;r<l;r+=1){var o;n+=`${r?",":""}${null!=(o=_t(e[r],t))?o:"null"}`}n+="]"}else n="{",G(E,X(e),o=>{const r=_t(e[o],t);void 0!==r&&(n+=`${n.length>1?",":""}${ce(o)}:${r}`)}),n+="}";t.length-=1}else void 0!==e&&(n=ce(e));return n},pt=(e=C())=>{return{clone(){const t=C();for(const n in e)t[n]=m(e[n]);return pt(t)},delete:e=>{var n;return null==(n=t(e))||delete n[e]},get:e=>{var n;return null==(n=t(e))?void 0:n[e]},set:(e,n)=>t(e,!0)[e]=n,toArray:()=>{const t=z(e);return G(E,t,(e,n)=>{t[n]=X(e)}),R(dt,null,t)}};function t(t,n){const o=t.length?t[0]:"";return e[o]||(n?e[o]=C():null)}},ft=(e,t)=>e.async?v(t):t,gt={bound:{__proto__:null,GM_deleteValue(e){const{id:t}=this,n=rt(t),o=n[e];return delete n[e],lt(t,e,void 0,null,o,this)},GM_getValue(e,t){const n=rt(this.id)[e];return ft(this,n?st(n):t)},GM_listValues(){return ft(this,X(rt(this.id)))},GM_setValue(e,t){const{id:n}=this,o=Ie(t,_t)||null,r=rt(n),l=r[e];return r[e]=o,lt(n,e,t,o,l,this)},GM_addValueChangeListener(e,t){if(p(e)||(e=`${e}`),!u(t))return;const n=y(nt,this.id,e),o=G(Z,z(n),t);let r=o>=0&&X(n)[o];return r||(r=w("VMvc"),n[r]=t),r},GM_removeValueChangeListener(e){const t=nt[this.id];if(t){for(const n in t){const o=t[n];if(e in o){delete o[e],$e(o)&&delete t[n];break}}$e(t)&&delete nt[this.id]}},GM_getResourceText(e){return ht(this,e)},GM_getResourceURL(e,t){return ht(this,e,!!t,void 0===t)},GM_registerMenuCommand(e,t){const{id:n}=this,o=`${n}:${e}`;return Se.commands[o]=t,Re.post("RegisterMenu",{id:n,cap:e}),e},GM_unregisterMenuCommand(e){const{id:t}=this,n=`${t}:${e}`;delete Se.commands[n],Re.post("UnregisterMenu",{id:t,cap:e})},GM_download(e,t){let n;if(p(e)?e=m({url:e,name:t}):e&&(t=(e=m(e)).name,n=e.onload),!(t?!p(t)&&(t="not a string"):t="missing"))return J(e,{[c]:"blob",data:null,method:"GET",overrideMimeType:"application/octet-stream",onload:u(n)?n:()=>{}}),Xe(e,this,t);ze(e,new I(`Required parameter "name" is ${t}.`))},GM_xmlhttpRequest(e){return Xe(m(e),this)}},free:{__proto__:null,GM_addElement:(e,t,n)=>p(e)?mt(null,e,t):mt(e,t,n),GM_addStyle:e=>mt(null,"style",{textContent:e,id:w("VMst")}),GM_openInTab:(e,t)=>((t=m(d(t)?t:{active:!t})).url=e,Le(t)),GM_notification(e,t,n,o){const r=d(e)?e:{__proto__:null,text:e,title:t,image:n,onclick:o};if(!r.text)throw new I("GM_notification: `text` is required!");const l=tt(r);return{remove:()=>Re.send("RemoveNotification",l)}},GM_setClipboard(e,t){Re.post("SetClipboard",{data:e,type:t})},GM_log:ue.log,async AWE_engineStatus(e){const t=Re.send("GetEngineStatus");if(!e)return t;e(await t)},async AWE_startJsPlayer(){throw new I("not implemented")},async AWE_getAvailablePlayers(e,t){const n=Re.send("GetAvailablePlayers",e);if(!t)return n;t(await n)},async AWE_openInPlayer(e,t,n){const o=await Re.send("OpenInPlayer",{params:e,playerId:t});if(!n)return o;n(await o)},async AWE_getDeviceId(e){const t=Re.send("GetDeviceId");if(!e)return t;e(await t)},async AWE_registerContextMenuCommand(e,t,n,o){var r;return r=t,Pe.push(r),Re.send("RegisterContextMenuCommand")},async AWE_getLocale(e){const t=Re.send("GetLocale");if(!e)return t;e(await t)},async AWE_getConfig(e,t){const n=Re.send("GetConfig",e);if(!t)return n;t(await n)}}};function mt(e,t,n){let o,r;if(Re.call("AddElement",{tag:t,attrs:n},e,function(e){o=this,r=e},"cbId"),r){const e=new I(r[0]);throw e.stack+=`\n${r[1]}`,e}return g(o,"then",async e=>delete o.then&&(u(e)?e(o):o))}function ht(e,t,n,o){let r;const{id:l,resCache:s,resources:i}=e,a=i[t];if(a){const e="data:"===G(te,a,0,5),t=null==n?0:1+(n=o?!e:n);r=e&&!1===n||y(s,t,a,!1),r||(r=Re.call("GetResource",{id:l,isBlob:n,key:a,raw:e&&a}),!0!==r&&n&&(r=le(r)),y(s,t,a,r))}return ft(e,!0===r?a:r)}const yt=L.unscopables,vt=pt(),wt=(()=>{const n="wrappedJSObject",o=!t,s=ne[0],i=G(W,l);let a=!e;for(let e=0;e<s.length;e++){const t=s[e];+t>=0&&t<i||o&&("**VMInitInjection**"===t||"browser"===t||"chrome"===t)?a=!1:vt.set(t,1)}return r!==l&&G(E,ne[1],e=>{+e>=0&&e<i||(vt.set(e,-1),a=!1)}),e&&!t&&n in r&&!vt.get(n)&&(vt.set(n,1),a&&g(s,s.length,n)),a?s:vt.toArray()})(),bt=C(),Mt=C(),xt=e=>{let t,n,o;if(((t=bt[e])||(t=vt.get(e))&&(t=t>0?l:r))&&(n=K(t,e)))return n=m(n),e>="a"&&n.enumerable&&u(o=n.value)&&(o=S(o,t===r?r:l),n.value=F(o,"name",{__proto__:null,value:e})),+e>=0&&e<G(W,l)||(Mt[e]=n),n};function Gt(e){let t=vt;g(e,H,()=>"Window",!1,"get");const n=C(),o=new T(e,{__proto__:null,defineProperty(t,n,o){if(n in e||!(t=Mt[n]||xt(n))||t.configurable)return F(e,n,o)},deleteProperty:(n,o)=>((n=delete e[o])&&(n=Mt[o]||xt(o))&&(n=n.configurable)&&(t===vt&&(t=vt.clone()),t.delete(o)),!!n),get:(t,r)=>{if("undefined"!==r&&r!==yt)return void 0!==(t=e[r])||r in e?t:Et(e,r,o,n)&&e[r]},getOwnPropertyDescriptor:(t,r)=>K(e,r)||Et(e,r,o,n),has:(t,n)=>n in Mt||n in e||xt(n),ownKeys:()=>Ct(e,t),preventExtensions(){},set:(t,r,l)=>(r in e||Et(e,r,o,n),e[r]=l,!0)});return o}function Ct(e,t){const n=[],o=G(W,l);for(let t,r=0;r<o&&f(l,t=`${r}`);r+=1)t in e||x(n,t);return dt(n,t===vt?wt:t.toArray(),G(Y,pe(e),St,t.get))}function Et(e,t,n,o){let r=Mt[t]||xt(t);if(!r)return;const{get:s,set:i,value:a}=r;return a===l||"window"===t||"self"===t||"globalThis"===t||"top"===t&&l===top||"parent"===t&&l===G(N,l)?(r.value=n,delete r.get,delete r.set):s&&i&&"string"==typeof t&&t.length>=3&&"o"===t[0]&&"n"===t[1]?Rt(r,t,o,n):(s&&(r.get=S(s,l)),i&&(r.set=S(i,l))),F(e,t,r),r}function Rt(n,o,r,s){o=G(te,o,2),n.get=()=>r[o]||null,n.set=n=>{G(q,l,o,r[o]),u(n)?G(D,l,o,r[o]=e&&t?e=>G(n,s,e):S(n,s)):delete r[o]}}function St(e){return!this(e)}G(E,[V,O],e=>{G(E,pe(e=e[_]),t=>{bt[t]=e})}),ne=null;const $t={__proto__:null,getResourceUrl:"getResourceURL",xmlHttpRequest:"xmlhttpRequest"},At={__proto__:null,getResourceUrl:1,getValue:1,deleteValue:1,setValue:1,listValues:1},It=(()=>{const n=e&&!t&&r,o=!n&&((e,t,n)=>(t&&(t=f(t,"defineAs"))&&g(e,t,n),n));return{cloneInto:we||(e=>e),createObjectIn:n&&n.createObjectIn||((e,t)=>o(e,t,{})),exportFunction:n&&n.exportFunction||((e,t,n)=>o(t,n,e))}})(),Vt=()=>Re.post("TabClose"),kt=()=>Re.post("TabFocus");function Pt(e){const{id:t,meta:n}=e,{grant:o}=n,l=m(n.resources),s={__proto__:null,id:t,script:e,resources:l,resCache:C()},i=Ot(e.gmi,n,l),a={__proto__:null,info:i},c={__proto__:null,GM:a,GM_info:i,unsafeWindow:r};let u,d,_=o.length;return 1===_&&"none"===o[0]&&(_=0),J(c,It),G(E,o,e=>{const t="GM."===G(te,e,0,3)&&G(te,e,3),n=t?`GM_${$t[e=t]||t}`:e,o=gt.bound[n];let r=o||gt.free[n];o?r=S(r,At[t]?u||(u=J(C(),{async:!0},s)):s):!r&&(r="window.close"===e&&Vt||"window.focus"===e&&kt)&&(e=G(te,e,7)),r&&((t?a:c)[e]=r)}),_&&(d=Gt(c),c.c=c),{gm:c,wrapper:d}}function Ot(e,t,n){const o=X(n);return G(E,o,(e,t)=>{o[t]={name:e,url:n[e]}}),t.resources=o,Tt(e,{injectInto:Re.mode,platform:Tt({},Re.ua),script:t,scriptHandler:"AceScript",version:"1.2.5"})}function Tt(e,t){for(let n=0,o=X(t);n<o.length;n++){const r=o[n];g(e,r,t[r])}return e}const Lt=C();function jt(e){if(!t)return Re.mode=s,Re.post=(t,n,o)=>{e({cmd:t,data:n,node:o},s)},r.chrome=void 0,r.browser=void 0,(e,t,n,o)=>{Re.onHandle({cmd:e,data:t,node:o})};G(D,l,t+"*",e=>{e=G(ye,e),ke(e[0],e[1],Re)},{__proto__:null,once:!0,capture:!0}),G(U,l,new $(t)),Re.mode="page",ge({WriteVault(e){this[e]=be}})}function Ut(e){const t=Lt[e.name],n=G(he,document),{gm:o,wrapper:s=r}=Pt(t);delete l[t.key.win],n&&G(ee,n),Re.post("Run",t.id),G(e,s,o,ue.error)}ge({Command({id:e,cap:t,evt:n}){const o=n.key?k:P,r=Se.commands[`${e}:${t}`];r&&r(new o(n.type,n))},Callback({id:e,data:t}){const n=Re.callbacks[e];delete Re.callbacks[e],n&&G(n,this,t)},async Plant({data:e,win:t}){g(l,t,Ut,!0,"set"),await 0,delete Lt[e],delete l[t]},ScriptData({info:n,items:o}){n&&J(Re,n);const r=[];for(let e=0;e<o.length;e++){const n=o[e],{key:s}=n;if(Lt[s.data]=n,Se.values[n.id]=m(n.values),!t){const e=s.win,t=l[e];t?(x(r,t),delete l[e]):M(l,e,{configurable:!0,set:Ut})}}t?e&&Re.post("InjectList",o[0].runAt):G(E,r,Ut)},Expose(){external.AceScript={version:"1.2.5",isInstalled:(e,t)=>Re.send("GetScriptVer",{meta:{name:e,namespace:t}}),startEngine:()=>Re.send("StartEngine")}}}),o.exports=B})();const{exports:Me}=o;return Me.__esModule?Me.default:Me})}